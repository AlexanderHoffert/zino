{"version":3,"sources":["src/utils.js","src/htmlparser.js","src/events.js","src/core.js","src/mustacheparser.js","src/zino.js"],"names":["merge","target","args","Array","_len","_key","arguments","forEach","arg","all","HTMLElement","propDetails","value","writable","obj","attribute","isObj","Object","getOwnPropertyDescriptor","error","method","tag","parentException","Error","message","fileName","lineNumber","uuid","replace","c","r","Math","random","toString","parseAttributes","match","attributes","attr","attrRegExp","exec","idx","push","name","toLowerCase","DOM","tagName","parentNode","outerHTML","concat","this","map","selfClosingTags","indexOf","join","innerHTML","children","child","text","parse","className","filter","ref","html","dom","length","undefined","lastIndex","currentDOM","commentRegExp","g","x","m","m1","m2","trim","tagRegExp","substring","index","substr","find","selector","result","querySelectorAll","slice","call","id","split","trigger","data","eventQueue","fn","on","off","isFn","one","self","apply","attachEvent","el","events","host","addEventListener","findEl","node","eventObj","keys","handlers","event","e","getHost","registerTag","code","path","document","firstElement","functions","RegExp","tagRegistry","handleScripts","$","initializeTag","mount","ignoreRender","entry","getAttribute","render","emptyFunc","noEvents","renderTag","registryEntry","isRendered","bind","sibling","__i","removeChild","defineProperty","val","__s","setAttribute","props","getAttributes","mounting","subEvents","hostEvents","childEvents","isNotSelf","__ready","renderCallbacks","renderedHTML","mustache","renderOptions","renderedDOM","subEl","subElEvents","unmountTag","renderedSubElements","defaultFunctions","noRenderCall","callback","attachSubEvents","count","onready","dataRegistry","unmount","propsOnly","attrs","element","styles","body","isComplex","toUpperCase","setElementAttr","source","baseAttrs","isArray","handleStyles","link","type","style","global","selectors","script","src","Function","_typeof","syntax","getValue","noRun","parts","shift","handleBlock","options","depth","startIdx","ch","key","condition","parsed","content","lastPos","len","transform","defaultUnit","renderStyle","cresult","_handleBlock2","resolveData","urlRegistry","window","zinoTagRegistry","Zino","dirtyTags","tagObserver","MutationObserver","records","record","added","addedNodes","removed","removedNodes","subTag","zino","url","cache","req","XMLHttpRequest","open","onreadystatechange","readyState","callbacks","status","responseText","cb","send","fetch","createElement","head","appendChild","import","href","observe","requestAnimationFrame","reRender"],"mappings":"gCAMA,SAAgBA,GAAOC,8BAAWC,EAAMC,MAAAC,EAAA,EAAAA,EAAA,EAAA,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,MAAAA,EAAA,GAAAC,UAAAD,YAClCE,QAAQ,SAAAC,OACP,GAAIC,KAAOD,IACa,mBAAhBE,cAA+BF,YAAeE,kBAAuD,KAAhCC,EAAYH,EAAKC,GAAKG,SAA2BX,EAAOQ,IAAQE,EAAYV,EAAQQ,GAAKI,eAClKJ,GAAOD,EAAIC,MAKdR,EAGR,QAASU,GAAYG,EAAKC,SAClBC,GAAMF,IAAQG,OAAOC,yBAAyBJ,EAAKC,OAuC3D,QAAgBI,GAAMC,EAAQC,EAAKC,QAC9BA,GACG,GAAIC,OAAM,uBAAyBH,EAAS,gBAAkBC,EAAM,MAAQC,EAAgBE,SAAWF,GAAkBA,EAAgBG,SAAUH,EAAgBI,eAEvJL,EACZ,GAAIE,OAAMH,EAAS,MAAQE,EAAgBE,SAAWF,GAAkBA,EAAgBG,SAAUH,EAAgBI,aA6B1H,QAAgBC,WACR,uCAAuCC,QAAQ,QAAS,SAAAC,MAC1DC,GAAoB,GAAhBC,KAAKC,SAAgB,SAChB,KAALH,EAAWC,EAAQ,EAAJA,EAAU,GAAKG,SAAS,MCzFjD,QAASC,GAAgBC,UACpBC,MACAC,MAAAA,GAEIA,EAAOC,EAAWC,KAAKJ,IAAS,IACnCK,GAAMJ,EAAWK,MAAMC,KAAML,EAAK,GAAGM,cAAe/B,MAAOyB,EAAK,IAAMA,EAAK,KAAO,IAC3ED,EAAWI,GAAKE,MAAQN,EAAWI,GAAK5B,YAE7CwB,GAGR,QAASQ,GAAIC,EAASV,EAAOW,MACxBV,GAAaF,EAAgBC,YAGvBU,GAAWA,EAAQF,kEAOxBI,gBACCX,IAAc,IAAIY,OAAOC,KAAKb,WAAWc,IAAI,SAAAb,SAAQA,GAAKK,KAAO,KAAOL,EAAKzB,MAAQ,aACrFuC,GAAgBC,QAAQH,KAAKJ,UAAY,EACrC,IAAMI,KAAKJ,QAAUT,EAAWiB,KAAK,KAAO,KAE5C,IAAMJ,KAAKJ,QAAUT,EAAWiB,KAAK,KAAO,IAAMJ,KAAKK,UAAY,KAAOL,KAAKJ,QAAU,QAG9FS,mBACIL,MAAKM,SAASL,IAAI,SAAAM,SAASA,GAAMC,MAAQD,EAAMT,YAAWM,KAAK,QAEnEC,WAAU1C,QACR2C,SAAWG,EAAM9C,GAAO2C,aAE1BI,mBACIV,MAAKb,WAAL,OAA4B,iBApB9B,SAsBOM,SACLO,MAAKb,WAAWM,iBAvBlB,SAyBOA,EAAM9B,QACbwB,WAAaa,KAAKb,WAAWwB,OAAO,SAAAvB,SAAQA,GAAKK,OAASA,IACrD,UAAQO,KAAKb,WAAWK,MAAMC,KAAAA,EAAM9B,MAAAA,SACzCwB,WAAWM,GAAQ9B,eA5BnB,SA8BMiD,OACN,GAAIpD,KAAOwC,MAAKM,YAChBN,KAAKM,SAAS9C,KAASoD,EAAK,OACxBZ,MAAKM,SAAS9C,YAQ1B,QAAgBiD,GAAMI,MAAMC,GAAuBzD,UAAA0D,OAAA,OAAAC,KAAA3D,UAAA,GAAAA,UAAA,GAAjB,GAAIsC,GAAI,QACrCT,MAAAA,GAAO+B,EAAY,EACtBC,EAAaJ,QAGPD,EAAKlC,QAAQwC,EAAe,IAAIxC,QAAQ,4CAA6C,SAACyC,EAAGC,EAAGC,SAAMF,GAAEzC,QAAQ2C,EAAGA,EAAE3C,QAAQ,iBAAkB,SAACyC,EAAGG,EAAIC,SAAOD,GAAGC,EAAG7C,QAAQ,KAAM,SAAS4C,OAAME,OAC5LvC,EAAQwC,EAAUpC,KAAKuB,IAAQ,IAClCN,OAAAA,GACAC,EAAOK,EAAKc,UAAUV,EAAW/B,EAAM0C,OAAOjD,QAAQ,kBAAmB,OACjEO,EAAM0C,MAAQ1C,EAAM,GAAG6B,OAC/BP,EAAKO,OAAS,KAENT,SAASd,MAAMgB,KAAAA,IAEvBtB,EAAM,MAEDgC,IACKA,EAAWrB,eAGhB,GAAIF,GAAIT,EAAM,GAAIA,EAAM,GAAIgC,KACzBZ,SAASd,KAAKe,IACpBrB,EAAM,IAAMgB,EAAgBC,QAAQI,EAAMX,SAAW,MAE5CW,OAKZC,GAAOK,EAAKgB,OAAOZ,aACfH,EAAIR,SAASd,MAAMgB,KAAAA,IAEpBM,EAGR,QAAgBgB,GAAKC,EAAUjB,MAC1BkB,YAGAlB,IAAuC,kBAAzBA,GAAImB,oBACXC,MAAMC,KAAKrB,EAAImB,iBAAiBF,QAIpCjB,EAAIR,SAAShD,QAAQ,SAAAiD,MACvBnB,OAAAA,EACAmB,GAAMC,QACU,MAAhBuB,EAAS,IAAcxB,EAAMpB,WAAWiD,KAAOL,EAASF,OAAO,KACjEzC,EAAO2C,EAAS7C,MAAM,gBAAkBqB,EAAMpB,WAAWC,EAAK,KAC/C,MAAhB2C,EAAS,IAAcxB,EAAMG,UAAU2B,MAAM,KAAKlC,QAAQ4B,EAASF,OAAO,KAAO,GACjFtB,EAAMX,UAAYmC,EAASM,MAAM,SAAS,OACnC7C,KAAKe,KAEJyB,EAAOjC,OAAO+B,EAAKC,EAAUxB,OAEhCyB,GClHR,QAAgBM,GAAQ7C,EAAM8C,MACxBC,EAAW/C,OACX,GAAImC,KAASY,GAAW/C,GAAO,GAC9BU,QAAQ,aAAemC,EAAQ,mBAAoB7C,KAAAA,EAAMgD,GAAID,EAAW/C,GAAMmC,GAAQW,KAAAA,OACvFP,GAASQ,EAAW/C,GAAMmC,GAAOW,OACtB,IAAXP,EAAkB,OAIxB,QAAgBU,GAAGjD,EAAMgD,GACnBD,EAAW/C,OACJA,SAEDA,GAAMD,KAAKiD,KACjBtC,QAAQ,aAAemC,EAAQ,oBAAqB7C,KAAAA,EAAMgD,GAAAA,IAGhE,QAAgBE,GAAIlD,EAAMgD,OACpBG,EAAKH,gBACFD,GAAW/C,GACXA,EAAKU,QAAQ,aAAemC,EAAQ,sBAAuB7C,KAAAA,QAE9D,GAAImC,KAASY,GAAW/C,MACxB+C,EAAW/C,GAAMmC,KAAWa,eACxBD,GAAW/C,GAAMmC,GACjBnC,EAAKU,QAAQ,aAAemC,EAAQ,sBAAuB7C,KAAAA,EAAMgD,GAAAA,IAK3E,QAAgBI,GAAIpD,EAAMgD,KACtBhD,EAAM,QAASqD,OACdC,MAAM/C,KAAM3C,aACXoC,EAAMqD,KAIZ,QAAgBE,GAAaC,EAAIC,EAAQC,MACnCP,EAAKK,EAAGG,sBACTC,GAAS,SAACtB,EAAU/E,UACnBsG,GAAOxB,EAAKC,EAAUkB,GACnBK,EAAKvC,OAAS,GAAK/D,IAAWmG,GAAM,IACtCG,EAAKnD,QAAQnD,IAAW,EAAG,MAAOsG,GAAKA,EAAKnD,QAAQnD,MAC/CA,EAAO6C,kBAEV,KAEDvC,QAAQ,SAAAiG,UACPC,KAAKD,EAASE,UAAUnG,QAAQ,SAAAoG,KACnCN,iBAAiBM,EAAO,SAAAC,MACtB3G,OAAAA,IACsB,UAAtBuG,EAASxB,WAAyB/E,EAASqG,EAAOE,EAASxB,SAAU4B,EAAE3G,gBAC/DA,EAAO4G,QAAU,iBAAMT,GAAKS,cAC9BH,SAASC,GAAOvB,KAAKnF,GAAUmG,EAAMQ,MAE7C,QCzBN,QAAgBE,GAAYC,EAAMC,EAAMC,MACnCC,GAAepD,EAAKiD,GAAMxD,SAAS,GACtCV,EAAUqE,EAAarE,QACvBsE,MAAAA,KAGMH,EAAKpF,QAAQ,WAAY,MAEzBmF,EAAKnF,QAAQ,GAAIwF,QAAO,QAAUvE,EAAU,gBAAkB,MAAO,IAAIjB,QAAQ,yCAA0C,MACrHmF,KAAOA,EAEhBM,EAAYxE,OAKHqE,KACDI,EAAcJ,EAAcF,KAC5BnE,IAAYsE,UAAAA,EAAWJ,KAAAA,EAAMC,KAAAA,EAAMnE,QAAAA,MAGnC0E,EAAE1E,EAASoE,GAAU1G,QAAQ,SAAAc,SAAOmG,GAAcnG,EAAKgG,EAAYxE,OAGhF,QAAgB4E,GAAMpG,EAAKqG,MACrBrG,EAAIwB,YACL8E,GAAQN,EAAYhG,EAAIwB,QAAQF,kBAC/BgF,IAAStG,EAAIuG,aAAa,iBAC3BF,KAAcC,EAAMR,UAAUU,OAASC,GACpCN,EAAcpC,KAAKsC,GAAgBK,UAAU,GAAQ9E,KAAM5B,EAAKsG,IAGxE,QAAgBE,GAAOxG,KACN2G,EAAU3G,GACCA,GAO5B,QAASmG,GAAcnG,EAAK4G,OAEvB5G,EAAA,KAAe4G,MACfd,GAAYc,EAAcd,UAC7Be,MAAAA,OAGI,GAAIzH,KAAO0G,GAAW,IACtBQ,GAAQR,EAAU1G,IACjB,QAAS,UAAW,SAAU,UAAU2C,QAAQ3C,GAAO,IACvDoF,EAAK8B,KACJlH,GAAOkH,EAAMQ,KAAK9G,KAElBZ,GAAOkH,MAKVtG,EAAIkC,SAASS,OAAS,GAAmC,iBAA9B3C,EAAIkC,SAAS,GAAGI,UAA8B,IACxEyE,GAAU/G,EAAIkC,SAAS,EAEvB6E,IAAiC,mBAAtBA,EAAQzE,cAClB0E,IAAMD,EAAQ9E,YACH8E,EAAS/G,KAChByB,WAAWwF,YAAYF,OAEnB,SAETC,IAAMhH,EAAIiC,YACCjC,KACXiC,UAAY,0CAGViF,eAAelH,EAAK,YAAQ,SAC9BmH,KACCH,IAAMG,IACKnH,KACP,sBAAuBA,EAAIwF,gBAJF,iBAMnBxF,GAAIgH,SAEhBI,IAAMpH,EAAIqH,eACVA,aAAe,SAASrG,EAAMmG,KAC7BC,IAAIpG,EAAMmG,KACN,sBAAuBnH,EAAIwF,cAIhC8B,MAAQ3I,KAAUmH,EAAUwB,MAAOC,EAAcvH,GAAK,UAErDwH,UAAW,IACLpB,MAAMrC,KAAK/D,SACdA,GAAIwH,SACV,MAAOjC,KACF,QAASvF,EAAIwB,QAAS+D,MAIzBkC,IAAaZ,GAAcF,EAAU5C,KAAKnC,KAAM5B,KAAS8E,WAGzD4C,KACH5C,EAASgB,EAAUhB,WACnB6C,EAAc/H,OAAOwF,KAAKN,GAAQvC,OAAO,SAAAnD,MACpCwI,GAAoB,UAARxI,GAAmBA,IAAQY,EAAIwB,cAC1CoG,IAAWF,EAAWtG,MAAMiE,SAAUP,EAAO1F,GAAMuE,SAAUvE,IAC3DwI,IACL/F,IAAI,SAAA0D,UAAO5B,SAAU4B,EAAGF,SAAUP,EAAOS,WAEnCT,OAAS2C,EAAU3C,OAAOnD,QAAQgG,YAAAA,EAAaD,WAAAA,EAAY1H,IAAK4B,MAAQA,KAAK8E,SAAW1G,EAAIwB,QAAUxB,IAE3GA,EAAIe,WAAW8G,WACfT,IAAI,WAAW,GAEfxF,OAA0B,IAAlBA,KAAK8E,eAIVe,KAFSA,EAAWzH,IAM7B,QAAS2G,GAAU3G,MAAK4G,GAAwD3H,UAAA0D,OAAA,OAAAC,KAAA3D,UAAA,GAAAA,UAAA,GAAxC+G,EAAYhG,EAAIwB,QAAQF,eAC3DwD,KACHgD,KAGG3D,EAAOoD,EAAcvH,GACrB+H,EAAeC,EAASpB,EAAclB,KAAMvB,EAAM8D,GAClDC,EAAczF,EAAKsF,OAGlB,GAAI3I,KAAO4G,aAAP5G,KACNA,EAAK8I,GAAahJ,QAAQ,SAAAiJ,MACvBC,GAAcjC,EAAcpC,wBACb,YACR,GACRoE,EAAOnC,EAAY5G,MACb0F,EAAOnD,OAAOyG,EAAYtD,UACjBgD,EAAgBnG,OAAOyG,EAAYN,oBAP9C1I,KAYP,YAAaY,GAAKd,QAAQmJ,MACxBC,GAAsBpC,EAAE,YAAagC,YAErChG,SAAS,GAAGD,UAAYiG,EAAYjG,YACpBU,OAAS,GAAKuD,EAAE,YAAalG,GAAKd,QAAQ,SAACiJ,EAAO3E,KAC/D2E,EAAOG,EAAoB9E,MACbA,GAAOgC,QAAU+C,EAAiB/C,QAAQsB,KAAKqB,KAG/DvG,MAASA,KAAK4G,eAIFpH,KAAKwF,EAAcd,UAAUU,OAAOM,KAAK9G,OAHzCd,QAAQ,SAAAuJ,SAAYA,SACtB3C,UAAUU,OAAOzC,KAAK/D,KAI7B8E,OAAAA,EAAQgD,gBAAAA,EAAiB3D,KAAAA,GAGlC,QAASuE,GAAgBjB,EAAWzH,MAC/B2I,QACM7D,OAAO5F,QAAQ,SAAAoG,MACpBT,GAAKS,EAAMtF,GACVL,GAAMkF,OACJA,IAAO8D,EAAM9D,IAAO,GAAK,IAC1BqB,EAAErB,EAAI7E,GAAK2I,EAAM9D,GAAM,MAEjBA,EAAG3C,SAAS,GAAIoD,EAAMqC,YAAa9C,KACnCA,EAAIS,EAAMoC,WAAY7C,KAC7BA,EAAG+D,UAAY/D,EAAG+D,YAIzB,QAASP,GAAWrI,MACfqB,IAAQrB,EAAIwB,SAAW,IAAIF,cAC9BgF,EAAQN,EAAY3E,MACjBiF,EAAO,IACPpH,QAAQ6E,KAAK/D,EAAIe,WAAY,SAAAC,GAE3BA,EAAKK,KAAKU,QAAQ,UAAY,SAC1B8G,GAAa7H,EAAKzB,eAIpBuG,UAAUgD,QAAQ/E,KAAK/D,GAC5B,MAAOuF,KACF,yBAA2BlE,EAAMkE,KAK1C,QAASgC,GAAcvH,EAAK+I,MACvBC,IAAS1B,MAAOtH,EAAIsH,MAAO2B,QAASjJ,EAAIiJ,QAASC,OAAQlJ,EAAIkJ,OAAQC,KAAMnJ,EAAIgH,KAClFM,cAEEpI,QAAQ6E,KAAK/D,EAAIe,WAAY,SAAArB,MAC3B0J,GAAY1J,EAAU2B,KAAKU,QAAQ,UAAY,GAAsC,OAAjCrC,EAAUH,MAAMkE,OAAO,EAAG,KAC5E/D,EAAU2B,QAAU2H,EAAMtJ,EAAU2B,MAAQ+H,EAAYP,EAAanJ,EAAUH,MAAMgB,QAAQ,WAAY,KAAOb,EAAUH,OACxF,IAApCG,EAAU2B,KAAKU,QAAQ,aACpBrC,EAAU2B,KAAKd,QAAQ,UAAW,IAAIA,QAAQ,aAAc,SAACyC,EAAGG,EAAIC,SAAOD,GAAKC,EAAGiG,iBAAkBL,EAAMtJ,EAAU2B,SAIzH0H,EAAkBzB,EACf0B,EAGR,QAASM,GAAeC,MAAQ3K,GAAiBK,UAAA0D,OAAA,OAAAC,KAAA3D,UAAA,GAAAA,UAAA,GAARsK,EACpCC,QACDtK,QAAQ6E,KAAKwF,EAAOrH,SAAU,SAAA2C,OAC5BA,EAAGzC,SACHf,GAAOwD,EAAGrD,QAAQF,aAClBkI,GAAUnI,IACRmI,EAAUnI,GAAMoI,YACVpI,IAASmI,EAAUnI,MACnBA,GAAMoI,SAAU,KAEjBpI,GAAMD,KAAKyD,MAEXxD,GAAQwD,OAGboE,QAAUO,EAGlB,QAASE,GAAaT,MACjBzH,GAAUyH,EAAQzH,UACpB,OAAQyH,GAAS/J,QAAQ,SAAAyK,GACG,eAAzBA,EAAK5I,WAAW6I,QACX,gBAAiBD,OAGnB,gBACPzD,EAAE,QAAS+C,GAASpH,IAAI,SAAAgI,SACZA,GAAM5H,UAAU1B,QAAQ,QAAS,IAChCA,QAAQ,4BAA6B,SAACuJ,EAAQhJ,MACrDiJ,GAAYjJ,EAAMmD,MAAM,KAAKpC,IAAI,SAAA8B,YACzBA,EAASN,OAChBM,EAAS7C,MAAM,YAClB6C,EAAS7C,MAAM,GAAIiF,QAAJ,QAAmBvE,EAAnB,SACfmC,EAAS7C,MAAM,oDACR6C,EAEDnC,EAAU,IAAMmC,UAEjBmG,GAAOvJ,QAAQO,EAAOiJ,EAAU/H,KAAK,QAC1CzB,QAAQ,YAAaiB,GAAW,OACjCQ,KAAK,OAIV,QAASiE,GAAcgD,EAAStD,MAC3BG,GAAYnH,KAAU4J,YACxB,SAAUU,GAAS/J,QAAQ,SAAA8K,MACxB5H,GAAO4H,EAAO/H,UAAUoB,UACxB2G,EAAOjJ,WAAWkJ,UACd/F,GAAQ,iBAAkB8F,SAG1B5H,EAAK7B,QAAQ,uBAAwB,4BAA8BoF,EAAO,UAC3EG,EAAW,GAAIoE,UAAS,UAAY9H,MACzC,MAAOmD,qBACcnD,EAAtB,WAAqC6G,EAAQzH,QAAW+D,MAGnDO,wnBH9MGnG,EAAQ,SAAAF,SAAsB,gBAAf,KAAOA,EAAP,YAAA0K,EAAO1K,KACtB+E,EAAO,SAAAH,SAAoB,kBAAPA,IACpBoC,EAAY,aIjGtB2D,EAAS,6BAETC,EAAW,SAAChJ,EAAM8C,EAAMmG,MACnBC,IAAS,KACZ9K,EAAM0E,MAEH1E,EAAI4B,MACEA,GACCA,EAAKsB,OAAS,MAChBtB,EAAK4C,MAAM,MAGbxE,GAAO8K,EAAM5H,OAAS,KACtBlD,EAAI8K,EAAMC,gBAGZF,GAAS9F,EAAK/E,OACZA,EAAIkF,MAAMR,QAEFvB,KAARnD,GAA6B,OAARA,EAAeA,EAAM,IAGlDgL,EAAc,SAAC3J,EAAOqD,EAAMuB,EAAMgF,EAASC,EAAOC,MAC7CC,GAAK/J,EAAM,GACdgK,EAAMhK,EAAM2C,OAAO,GAAGJ,OACtB0H,EAAYV,EAASS,EAAK3G,GAAM,GAChC6G,EAAS,GACTpH,EAAS,MAEC,MAAPiH,KAAgBE,GAAaA,GAAaA,EAAUpI,QAAU,MACrD,EACK,MAAPkI,OACE,GAGTE,EAAW,CACTpL,EAAMoL,QACGA,QAET,GAAI3L,KAAO2L,MACH,YAAR3L,MACAyF,GAAKkG,EAAU3L,QACViD,EACPqD,EACA/G,KAAUwF,EAAMU,YACLzF,YACC2L,EAAUpI,WAChBkC,IAEN6F,EACAC,EACAC,GAEEpG,EAAKK,UAEGA,EAAGmG,EAAOC,SACnB,MAAO1F,QACF,IAAIrF,OAAM,oCAAsC8K,EAAOC,QAAU,4BAA8B1F,EAAEpF,iBAG9F6K,EAAOC,eAKftL,GAAMqL,OACD3I,EAAMqD,EAAMvB,EAAMuG,EAASC,EAAOC,KAGpCI,EAAOnI,UAAWe,IAG3BvB,EAAQ,SAASqD,EAAMvB,MAAMuG,GAAuCzL,UAAA0D,OAAA,OAAAC,KAAA3D,UAAA,GAAAA,UAAA,MAAzB0L,EAAyB1L,UAAA0D,OAAA,OAAAC,KAAA3D,UAAA,GAAAA,UAAA,GAAjB,EAAG2L,EAAc3L,UAAA0D,OAAA,OAAAC,KAAA3D,UAAA,GAAAA,UAAA,GAAH,EAC5D2E,EAAS,GACZsH,EAAUN,EACV9J,MAAAA,GAAOgK,MAAAA,GAAKK,MAAAA,GAAKN,MAAAA,GAEjBO,EAAY,QAAZA,GAAYjE,SAAO3C,GAAK2C,GAAOiE,EAAUjE,EAAIxC,MAAMR,IAASgD,GAAsB,gBAARA,IAA4B,OAARA,EAAgBhD,EAAK+E,QAAU/E,EAAK+E,OAAOmC,aAAe,KAAQ,KAChKC,EAAc,SAAAjK,MACT9B,GAAQ8K,EAAShJ,EAAM8C,GAC1B0F,EAAQ,MAELlK,EAAMJ,OACJ,GAAIH,KAAOG,MACNH,EAAImB,QAAQ,SAAU,SAAAyC,SAAK,IAAMA,EAAE1B,gBAAiB,IAAM8J,EAAU7L,EAAMH,IAAQ,UAItFyK,QAIJnE,EAAK5E,MAAMsJ,kBAEL1E,YACEA,EAAK/C,OAAS,QAInB7B,EAAQsJ,EAAOlJ,KAAKwE,SACvB5E,EAAM0C,MAAQ0H,SAIRxF,EAAKjC,OAAOyH,EAASpK,EAAM0C,MAAQ0H,KACxCpK,EAAM,GAAG,KACRA,EAAM,GAAG2C,OAAO,GAAGJ,SACnBvC,EAAM,GAAG6B,SACL7B,EAAM0C,MAAQ2H,EAEpB,KAAKpJ,QAAQ8I,IAAO,EAAG,IAEtBU,OAAAA,KACiBd,EAAY3J,EAAM,GAAIqD,EAAMuB,EAAMgF,EAASC,EAAQ,EAAGO,cAHjDM,EAAA,KAAAA,EAAA,MAIhBD,MACJ,CAAA,GAAW,MAAPV,EAAY,IAElBF,GAAS,OACN,IAAIzK,OAAM,2BAA6B4K,UAEtCjI,UAAWqI,EAASD,QAASrH,GAC/B,GAAW,MAAPiH,KAEA,OACJ,IAAW,MAAPA,KAEAC,EAAI7G,MAAM,WAAWpC,IAAIyJ,GAAatJ,KAAK,QAC/C,IAAW,MAAP6I,EAAY,IAClBtL,GAAQ8K,EAASS,EAAK3G,GACtBH,EAAK0G,EAAQe,YAAYX,EAAKvL,MACxB,KAAOyE,EAAK,aACL,MAAP6G,EAEAR,EAASS,EAAK3G,IAGb,GAAKkG,EAASvJ,EAAM,GAAIqD,IAAO5D,QAAQ,KAAM,SAASA,QAAQ,KAAM,QAAQA,QAAQ,KAAM,gBAG7FmF,EAAKjC,OAAOyH,GAClBP,EAAQ,OACL,IAAIzK,OAAM,qCAAuCwF,EAAKjC,OAAOmH,mBAI1DhH,YACE8B,EAAK/C,OAAS,IAK5BqF,EAAe,SAAStC,EAAMvB,MAAMuG,GAA+BzL,UAAA0D,OAAA,OAAAC,KAAA3D,UAAA,GAAAA,UAAA,IAApBwM,YAAa,SAAAxI,SAAGA,KAC1DW,EAASvB,EAAMqD,EAAMvB,EAAMuG,SACxB9G,IAAUA,EAAOqH,SAAW,IH3JnC3H,EAAY,gCACZrC,EAAa,uCACb8B,EAAgB,0BAChBjB,EAAkB,6CAA6CmC,MAAM,KCDlEG,KCEA4B,KACH6C,KACAN,kBAEU9B,UACEA,SACDA,UAJQ,iBAMC7E,gBAND,SAOTP,EAAM9B,MACVS,GAAM4B,KAAK4D,SACX7F,GAAM0B,KACHrB,EAAIsH,MAAOjG,KAEbiG,MAAMjG,GAAQ9B,EAEdS,EAAIwH,YACA,sBAAuBxH,KAKxBiI,eAAgB,SACd6C,EAAKvL,MACZyE,GAAK1D,aACI0D,GAAMzE,EACZyE,GAoRTM,GAAG,qBAAsB+D,GACzB/D,EAAG,mBAAoB8B,EE/SvB,IAAIsF,GAAcC,OAAOC,oBACxBC,MAAAA,GACAC,KACAC,EAAc,GAAIC,kBAAiB,SAAAC,KAC1B/M,QAAQ,SAAAgN,MACXC,GAAQD,EAAOE,WAClBC,EAAUH,EAAOI,YAEdH,GAAMxJ,OAAS,KACfzD,QAAQ6E,KAAKoI,EAAO,SAAAnM,IACrBA,EAAIkC,UAAYgE,EAAE,IAAKlG,QAAY2B,OAAO3B,GAAKd,QAAQ,SAAAqN,SAAUrI,GAAQ,mBAAoBqI,OAErFF,EAAQ1J,OAAS,MACxBzD,QAAQ6E,KAAKsI,EAAS,SAAArM,IACvBA,EAAIkC,UAAYgE,EAAE,YAAalG,QAAY2B,OAAO3B,GAAKd,QAAQ,SAAAqN,SAAUrI,GAAQ,qBAAsBqI,WAM7GC,EAAeX,QACVpH,IAAAA,EAAKF,IAAAA,EAAKL,QAAAA,QADO,SAGfuI,EAAKhE,EAAUiE,EAAOhH,MACvBgH,GAAShB,EAAYe,KAASf,EAAYe,GAAKhE,eAC3CA,GAASiD,EAAYe,GAAM,IAC5B,IAAI9M,EAAM+L,EAAYe,UACrBf,GAAYe,GAAKhE,SAASrH,KAAKqH,QAE3BgE,GAAO/G,cACP+C,KAER/C,MACAiH,GAAM,GAAIC,kBACVC,KAAK,MAAOJ,GAAK,KACjBK,mBAAqB,cACD,IAAnBH,EAAII,WAAkB,IACrBC,GAAYtB,EAAYe,GAAKhE,QACd,OAAfkE,EAAIM,WACKR,GAAOE,EAAIO,cAEnBR,SAAchB,GAAYe,KACrBvN,QAAQ,SAAAiO,SAAMA,GAAGR,EAAIO,aAAcP,EAAIM,cAG/CG,gBAzBgB,SA4BdzH,MAAM8C,GAAsBxJ,UAAA0D,OAAA,OAAAC,KAAA3D,UAAA,GAAAA,UAAA,GAAXwH,EACnBgG,GAAO7K,KAAK+D,MAAQ,IAAMA,IACzB0H,MAAMZ,EAAK,SAACtI,EAAM8I,GACP,MAAXA,MACS9I,EAAMsI,EAAK7G,SAASuD,aAG/B,WAGLwC,QAAOE,KAAOA,EACdvH,EAAG,gBAAiB,SAAAH,MACC,gBAATA,IAAqBA,EAAKxB,OAAS,EAAG,IAC5CkH,GAAQjE,SAAS0H,cAAc,WAC7BrL,UAAYkC,IACX0F,KAEAjE,SAAS2H,KAAKC,YAAYrJ,KAEnCG,EAAG,iBAAkBsB,SAAS2H,KAAKC,aACnClJ,EAAG,sBAAuB,SAAAtE,SAAO8L,GAAU1K,KAAKpB,KAChDkE,EAAQ,gBAAiB,mCACzBgC,EAAE,mBAAoBN,UAAU1G,QAAQ,SAAAc,SAAO6L,GAAK4B,OAAOzN,EAAI0N,QAC/D3B,EAAY4B,QAAQ/H,SAASuD,eACnB,aACE,IAGZyE,sBAAsB,QAASC,OACpB3O,QAAQsH,8BAEIqH","file":"zino.min.js","sourcesContent":["/**\n * Merges all objects provided as parameters into the first parameter object\n *\n * @param  {...Object} args list of arguments\n * @return {Object}         the merged object (same as first argument)\n */\nexport function merge (target, ...args) {\n\targs.forEach(arg => {\n\t\tfor (let all in arg) {\n\t\t\tif ((typeof HTMLElement !== 'undefined' && arg instanceof HTMLElement) || typeof propDetails(arg, all).value !== 'undefined' && (!target[all] || propDetails(target, all).writable)) {\n\t\t\t\ttarget[all] = arg[all];\n\t\t\t}\n\t\t}\n\t});\n\n\treturn target;\n}\n\nfunction propDetails(obj, attribute) {\n\treturn isObj(obj) && Object.getOwnPropertyDescriptor(obj, attribute) || {};\n}\n\n/**\n * Creates a diff of two JS objects. Includes attribute position check.\n *\n * @param  {Object} objA\tthe object to be compared\n * @param  {Object} objB \tthe object to compare with\n * @return {Object,Boolean} false if both objects are deep equal, else the values of what is different\n */\nexport function objectDiff(objA, objB) {\n\tlet result = {},\n\t\tpartialDiff;\n\tObject.keys(objA).forEach((key, index) => {\n\t\tif (!isValue(objA, key)) return;\n\t\tif (typeof objB[key] === 'undefined') {\n\t\t\tresult[key] = objA[key];\n\t\t} else if (Object.keys(objB)[index] !== key) {\n\t\t\tlet bKey = Object.keys(objB)[index];\n\t\t\tresult[bKey] = objB[bKey];\n\t\t\tresult[key] = objA[key];\n\t\t} else if (typeof objA[key] !== 'object' || typeof objB[key] !== 'object') {\n\t\t\tif (objA[key] !== objB[key]) {\n\t\t\t\tresult[key] = objB[key];\n\t\t\t}\n\t\t} else if (partialDiff = objectDiff(objA[key], objB[key])) {\n\t\t\tresult[key] = partialDiff;\n\t\t}\n\t});\n\tObject.keys(objB).forEach((key, index) => {\n\t\tif (!isValue(objB, key)) return;\n\t\tif (typeof objA[key] === 'undefined') {\n\t\t\tresult[key] = objB[key];\n\t\t}\n\t});\n\tif (Object.keys(result).length > 0) return result;\n\treturn false;\n}\n\nexport function error(method, tag, parentException) {\n\tif (parentException) {\n\t\tthrow new Error('Error while calling ' + method + ' function of ' + tag + ': ' + (parentException.message || parentException), parentException.fileName, parentException.lineNumber);\n\t} else {\n\t\tparentException = tag;\n\t\tthrow new Error(method + ': ' + (parentException.message || parentException), parentException.fileName, parentException.lineNumber);\n\t}\n}\n\n/**\n * Checks if the given arguments are the provided types, if they do no match, an exception is thrown.\n *\n * @param  {Array} args \tlist of arguments provided to callee\n * @param  {Array} types \tlist of data types expected for the provided arguments\n * @param  {String} api  \tname of the API (callee name)\n */\nexport function checkParams(args, types, api) {\n\tfor (var all in args) {\n\t\tif (types[all] && typeof args[all] !== types[all]) {\n\t\t\tthrow new Error('API mismatch while using ' + api + ': Parameter ' + all + ' was supposed to be ' + types[all] + ' but ' + (typeof args[all]) + ' was given.');\n\t\t}\n\t}\n}\n\n/**\n * makes sure that accessing attributes on an unknown data value is safe\n *\n * @param  {Mixed} obj \tdata to made safe for attribute access\n * @return {Object}     will always return an object\n */\nexport function safeAccess(obj) {\n\treturn obj || {};\n}\n\nexport function uuid() {\n\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n\t\tlet r = Math.random() * 16 | 0;\n\t\treturn (c == 'x' ? r : r & 0x3 | 0x8).toString(16);\n\t});\n}\nexport var isObj = obj => typeof obj === 'object';\nexport var isFn = fn => typeof fn === 'function';\nexport var emptyFunc = () => {};\nexport var identity = a => a;\n\nfunction isValue(obj, key) {\n\tlet descriptor = Object.getOwnPropertyDescriptor(obj, key);\n\treturn typeof descriptor.value !== 'undefined' && !isFn(descriptor.value);\n}\n","const\n\ttagRegExp = /<(\\/?)([\\w-]+)([^>]*?)(\\/?)>/g,\n\tattrRegExp = /([\\w_-]+)=(?:'([^']*?)'|\"([^\"]*?)\")/g,\n\tcommentRegExp = /<!--(?:[^-]|-[^-])*-->/g,\n\tselfClosingTags = 'br,img,input,source,hr,link,meta,wainclude'.split(',');\n\nfunction parseAttributes(match) {\n\tlet attributes = [];\n\tlet attr;\n\n\twhile ((attr = attrRegExp.exec(match))) {\n\t\tlet idx = attributes.push({name: attr[1].toLowerCase(), value: attr[2] || attr[3]}) - 1;\n\t\tattributes[attributes[idx].name] = attributes[idx].value;\n\t}\n\treturn attributes;\n}\n\nfunction DOM(tagName, match, parentNode) {\n\tlet attributes = parseAttributes(match);\n\n\t// make sure all tag names are lower cased\n\ttagName = tagName && tagName.toLowerCase();\n\n\treturn {\n\t\ttagName,\n\t\tattributes,\n\t\tchildren: [],\n\t\tparentNode,\n\t\tget outerHTML() {\n\t\t\tlet attributes = [''].concat(this.attributes.map(attr => attr.name + '=\"' + attr.value + '\"'));\n\t\t\tif (selfClosingTags.indexOf(this.tagName) >= 0) {\n\t\t\t\treturn '<' + this.tagName + attributes.join(' ') + '/>';\n\t\t\t} else {\n\t\t\t\treturn '<' + this.tagName + attributes.join(' ') + '>' + this.innerHTML + '</' + this.tagName + '>';\n\t\t\t}\n\t\t},\n\t\tget innerHTML() {\n\t\t\treturn this.children.map(child => child.text || child.outerHTML).join('');\n\t\t},\n\t\tset innerHTML(value) {\n\t\t\tthis.children = parse(value).children;\n\t\t},\n\t\tget className() {\n\t\t\treturn this.attributes['class'] || '';\n\t\t},\n\t\tgetAttribute(name) {\n\t\t\treturn this.attributes[name];\n\t\t},\n\t\tsetAttribute(name, value) {\n\t\t\tthis.attributes = this.attributes.filter(attr => attr.name !== name);\n\t\t\tvalue !== null && this.attributes.push({name, value});\n\t\t\tthis.attributes[name] = value;\n\t\t},\n\t\tremoveChild(ref) {\n\t\t\tfor (var all in this.children) {\n\t\t\t\tif (this.children[all] === ref) {\n\t\t\t\t\tdelete this.children[all]; // remove element\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\nexport function parse(html, dom = new DOM('root')) {\n\tlet match, lastIndex = 0,\n\t\tcurrentDOM = dom;\n\n\t// remove all comments in code & clean up scripts\n\thtml = html.replace(commentRegExp, '').replace(/<(script|style)[^>]*?>((?:.|\\n)*?)<\\/\\1>/g, (g, x, m) => g.replace(m, m.replace(/(['\"])(.*?)\\1/g, (g, m1, m2) => m1+m2.replace(/</g, '\\\\x3c')+m1))).trim();\n\twhile ((match = tagRegExp.exec(html))) {\n\t\tlet child;\n\t\tlet text = html.substring(lastIndex, match.index).replace(/^[ \\t]+|[ \\t]$/g, ' ');\n\t\tlastIndex = match.index + match[0].length;\n\t\tif (text.length > 0) {\n\t\t\t// if we have any text in between the tags, add it as text node\n\t\t\tcurrentDOM.children.push({text});\n\t\t}\n\t\tif (match[1]) {\n\t\t\t// closing tag\n\t\t\tchild = currentDOM;\n\t\t\tcurrentDOM = currentDOM.parentNode;\n\t\t} else {\n\t\t\t// opening tag\n\t\t\tchild = new DOM(match[2], match[3], currentDOM);\n\t\t\tcurrentDOM.children.push(child);\n\t\t\tif (!match[4] && selfClosingTags.indexOf(child.tagName) < 0) {\n\t\t\t\t// if it's not a self-closing tag, create a nesting level\n\t\t\t\tcurrentDOM = child;\n\t\t\t}\n\t\t}\n\t}\n\t// capture the text after the last found tag\n\tlet text = html.substr(lastIndex);\n\ttext && dom.children.push({text});\n\n\treturn dom;\n}\n\nexport function find(selector, dom) {\n\tlet result = [];\n\n\t// for regular Browser DOM\n\tif (dom && typeof dom.querySelectorAll === 'function') {\n\t\treturn [].slice.call(dom.querySelectorAll(selector));\n\t}\n\n\t// for virtual DOM\n\tdom && dom.children.forEach(child => {\n\t\tlet attr;\n\t\tif (child.text) return;\n\t\tif (selector[0] === '#' && child.attributes.id === selector.substr(1) ||\n\t\t\t(attr = selector.match(/^\\[(\\w+)\\]/)) && child.attributes[attr[1]] ||\n\t\t\tselector[0] === '.' && child.className.split(' ').indexOf(selector.substr(1)) >= 0 ||\n\t\t\tchild.tagName === selector.split(/\\[\\.#/)[0]) {\n\t\t\tresult.push(child);\n\t\t}\n\t\tresult = result.concat(find(selector, child));\n\t});\n\treturn result;\n}\n","import {find} from './htmlparser';\nimport {isFn} from './utils';\n\nlet eventQueue = {};\n\nexport function trigger(name, data) {\n\tif (!eventQueue[name]) return;\n\tfor (let index in eventQueue[name]) {\n\t\tname.indexOf('--event-') && trigger('--event-trigger', {name, fn: eventQueue[name][index], data});\n\t\tlet result = eventQueue[name][index](data);\n\t\tif (result === false) break;\n\t}\n}\n\nexport function on(name, fn) {\n\tif (!eventQueue[name]) {\n\t\teventQueue[name] = [];\n\t}\n\teventQueue[name].push(fn);\n\tname.indexOf('--event-') && trigger('--event-register', {name, fn});\n}\n\nexport function off(name, fn) {\n\tif (!isFn(fn)) {\n\t\tdelete eventQueue[name];\n\t\treturn name.indexOf('--event-') && trigger('--event-unregister', {name});\n\t}\n\tfor (let index in eventQueue[name]) {\n\t\tif (eventQueue[name][index] === fn) {\n\t\t\tdelete eventQueue[name][index];\n\t\t\treturn name.indexOf('--event-') && trigger('--event-unregister', {name, fn});\n\t\t}\n\t}\n}\n\nexport function one(name, fn) {\n\ton(name, function self() {\n\t\tfn.apply(this, arguments);\n\t\toff(name, self);\n\t});\n}\n\nexport function attachEvent (el, events, host) {\n\tif (!isFn(el.addEventListener)) return;\n\tlet findEl = (selector, target) => {\n\t\tlet node = find(selector, el);\n\t\twhile (node.length > 0 && target !== host) {\n\t\t\tif (node.indexOf(target) >= 0) return node[node.indexOf(target)];\n\t\t\ttarget = target.parentNode;\n\t\t}\n\t\treturn false;\n\t};\n\tevents.forEach(eventObj => {\n\t\tObject.keys(eventObj.handlers).forEach(event => {\n\t\t\tel.addEventListener(event, e => {\n\t\t\t\tlet target;\n\t\t\t\tif (eventObj.selector === ':host' || (target = findEl(eventObj.selector, e.target))) {\n\t\t\t\t\ttarget && (target.getHost = () => host.getHost());\n\t\t\t\t\teventObj.handlers[event].call(target || host, e);\n\t\t\t\t}\n\t\t\t}, false);\n\t\t});\n\t});\n}\n","import mustache from './mustacheparser';\nimport {parse as html, find as $} from './htmlparser';\nimport {emptyFunc, isFn, isObj, error, uuid, merge} from './utils';\nimport {trigger, on, attachEvent} from './events';\n\nlet tagRegistry = {},\n\tdataRegistry = {},\n\tdefaultFunctions = {\n\t\t'props': {},\n\t\t'mount': emptyFunc,\n\t\t'unmount': emptyFunc,\n\t\t'render': emptyFunc,\n\n\t\tgetHost() { return this; },\n\t\tsetProps(name, value) {\n\t\t\tlet tag = this.getHost();\n\t\t\tif (isObj(name)) {\n\t\t\t\tmerge(tag.props, name);\n\t\t\t} else {\n\t\t\t\ttag.props[name] = value;\n\t\t\t}\n\t\t\tif (!tag.mounting) {\n\t\t\t\ttrigger('--zino-rerender-tag', tag);\n\t\t\t}\n\t\t}\n\t};\n\nexport let renderOptions = {\n\tresolveData(key, value) {\n\t\tlet id = uuid();\n\t\tdataRegistry[id] = value;\n\t\treturn id;\n\t}\n};\n\nexport function registerTag(code, path, document) {\n\tlet firstElement = html(code).children[0],\n\t\ttagName = firstElement.tagName,\n\t\tfunctions;\n\n\t// clean up path\n\tpath = path.replace(/[^\\/]+$/g, '');\n\t// remove recursive tag use and all style/script nodes\n\tcode = code.replace(new RegExp('<\\\\/?' + tagName + '(?:\\s+[^>]+)?>', 'ig'), '').replace(/<(style|script)[^>]*>(?:.|\\n)*?<\\/\\1>/g, '');\n\tfirstElement.code = code;\n\n\tif (tagRegistry[tagName]) {\n\t\t// tag is already registered\n\t\treturn;\n\t}\n\n\thandleStyles(firstElement);\n\tfunctions = handleScripts(firstElement, path);\n\ttagRegistry[tagName] = {functions, code, path, tagName};\n\n\t// initialize all occurences in provided context\n\tdocument && $(tagName, document).forEach(tag => initializeTag(tag, tagRegistry[tagName]));\n}\n\nexport function mount(tag, ignoreRender) {\n\tif (!tag.tagName) return;\n\tlet entry = tagRegistry[tag.tagName.toLowerCase()];\n\tif (!entry || tag.getAttribute('__ready')) return;\n\tif (ignoreRender) entry.functions.render = emptyFunc;\n\treturn initializeTag.call(ignoreRender ? {noEvents: true} : this, tag, entry);\n}\n\nexport function render(tag) {\n\tlet subEvents = renderTag(tag);\n\tattachSubEvents(subEvents, tag);\n}\n\nexport function flushRegisteredTags() {\n\ttagRegistry = {};\n}\n\nfunction initializeTag(tag, registryEntry) {\n\t// check if the tag has been initialized already\n\tif (tag['__s'] || !registryEntry) return;\n\tlet functions = registryEntry.functions,\n\t\tisRendered;\n\n\t// copy all defined functions/attributes\n\tfor (let all in functions) {\n\t\tlet entry = functions[all];\n\t\tif (['mount', 'unmount', 'events', 'render'].indexOf(all) < 0) {\n\t\t\tif (isFn(entry)) {\n\t\t\t\ttag[all] = entry.bind(tag);\n\t\t\t} else {\n\t\t\t\ttag[all] = entry;\n\t\t\t}\n\t\t}\n\t}\n\t// if it has been pre-rendered\n\tif (tag.children.length > 0 && tag.children[0].className === '-shadow-root') {\n\t\tlet sibling = tag.children[1];\n\t\t// remove original HTML content\n\t\tif (sibling && sibling.className === '-original-root') {\n\t\t\ttag.__i = sibling.innerHTML;\n\t\t\tsetElementAttr(sibling, tag);\n\t\t\tsibling.parentNode.removeChild(sibling);\n\t\t}\n\t\tisRendered = true;\n\t} else {\n\t\ttag.__i = tag.innerHTML;\n\t\tsetElementAttr(tag);\n\t\ttag.innerHTML = '<div class=\"-shadow-root\"></div>';\n\t}\n\t// define basic properties\n\tObject.defineProperty(tag, 'body', {\n\t\tset(val) {\n\t\t\ttag.__i = val;\n\t\t\tsetElementAttr(tag);\n\t\t\ttrigger('--zino-rerender-tag', tag.getHost());\n\t\t},\n\t\tget() { return tag.__i; }\n\t});\n\ttag.__s = tag.setAttribute;\n\ttag.setAttribute = function(attr, val) {\n\t\ttag.__s(attr, val);\n\t\ttrigger('--zino-rerender-tag', tag.getHost());\n\t};\n\n\t// call mount callback\n\ttag.props = merge({}, functions.props, getAttributes(tag, true));\n\ttry {\n\t\ttag.mounting = true;\n\t\tfunctions.mount.call(tag);\n\t\tdelete tag.mounting;\n\t} catch (e) {\n\t\terror('mount', tag.tagName, e);\n\t}\n\n\t// render the tag's content\n\tlet subEvents = !isRendered && renderTag.call(this, tag) || {events:[]};\n\n\t// attach events\n\tlet hostEvents = [],\n\t\tevents = functions.events || [],\n\t\tchildEvents = Object.keys(events).filter(all => {\n\t\t\tlet isNotSelf = all !== ':host' && all !== tag.tagName;\n\t\t\tif (!isNotSelf) hostEvents.push({handlers: events[all], selector: all});\n\t\t\treturn isNotSelf;\n\t\t}).map(e => ({selector: e, handlers: events[e]}));\n\n\tsubEvents.events = subEvents.events.concat({childEvents, hostEvents, tag: this && this.noEvents ? tag.tagName : tag})\n\n\tif (!tag.attributes.__ready) {\n\t\ttag.__s('__ready', true);\n\t}\n\tif (!this || this.noEvents !== true) {\n\t\t// attach sub events\n\t\tattachSubEvents(subEvents, tag);\n\t} else {\n\t\treturn subEvents;\n\t}\n}\n\nfunction renderTag(tag, registryEntry = tagRegistry[tag.tagName.toLowerCase()]) {\n\tlet events = [],\n\t\trenderCallbacks = [];\n\n\t// do the actual rendering of the component\n\tlet data = getAttributes(tag);\n\tlet renderedHTML = mustache(registryEntry.code, data, renderOptions);\n\tlet renderedDOM = html(renderedHTML);\n\n\t// render all contained sub components\n\tfor (let all in tagRegistry) {\n\t\t$(all, renderedDOM).forEach(subEl => {\n\t\t\tlet subElEvents = initializeTag.call({\n\t\t\t\tnoRenderCallback: true,\n\t\t\t\tnoEvents: true\n\t\t\t}, subEl, tagRegistry[all]);\n\t\t\tevents = events.concat(subElEvents.events);\n\t\t\trenderCallbacks = renderCallbacks.concat(subElEvents.renderCallbacks);\n\t\t});\n\t}\n\n\t// unmount all existing sub tags\n\t$('[__ready]', tag).forEach(unmountTag);\n\tlet renderedSubElements = $('[__ready]', renderedDOM);\n\t// simply render everything inside\n\ttag.children[0].innerHTML = renderedDOM.innerHTML;\n\trenderedSubElements.length > 0 && $('[__ready]', tag).forEach((subEl, index) => {\n\t\tmerge(subEl, renderedSubElements[index])\n\t\trenderedSubElements[index].getHost = defaultFunctions.getHost.bind(subEl);\n\t});\n\n\tif (!this || !this.noRenderCall) {\n\t\trenderCallbacks.forEach(callback => callback());\n\t\tregistryEntry.functions.render.call(tag);\n\t} else {\n\t\trenderCallbacks.push(registryEntry.functions.render.bind(tag));\n\t}\n\treturn {events, renderCallbacks, data};\n}\n\nfunction attachSubEvents(subEvents, tag) {\n\tlet count = {};\n\tsubEvents.events.forEach(event => {\n\t\tlet el = event.tag;\n\t\tif (!isObj(el)) {\n\t\t\tcount[el] = (count[el] || 0) + 1;\n\t\t\tel = $(el, tag)[count[el] - 1];\n\t\t}\n\t\tattachEvent(el.children[0], event.childEvents, el);\n\t\tattachEvent(el, event.hostEvents, el);\n\t\tisFn(el.onready) && el.onready();\n\t});\n}\n\nfunction unmountTag(tag) {\n\tlet name = (tag.tagName || '').toLowerCase(),\n\t\tentry = tagRegistry[name];\n\tif (entry) {\n\t\t[].forEach.call(tag.attributes, attr => {\n\t\t\t// cleanup saved data\n\t\t\tif (attr.name.indexOf('data-') >= 0) {\n\t\t\t\tdelete dataRegistry[attr.value];\n\t\t\t}\n\t\t});\n\t\ttry {\n\t\t\tentry.functions.unmount.call(tag);\n\t\t} catch (e) {\n\t\t\terror('Unable to unmount tag ' + name, e);\n\t\t}\n\t}\n}\n\nfunction getAttributes(tag, propsOnly) {\n\tlet attrs = {props: tag.props, element: tag.element, styles: tag.styles, body: tag.__i},\n\t\tprops = {};\n\n\t[].forEach.call(tag.attributes, attribute => {\n\t\tlet isComplex = attribute.name.indexOf('data-') >= 0 && attribute.value.substr(0, 2) === '--';\n\t\tattrs[attribute.name] || (attrs[attribute.name] = isComplex ? dataRegistry[attribute.value.replace(/^--|--$/g, '')] : attribute.value);\n\t\tif (attribute.name.indexOf('data-') === 0) {\n\t\t\tprops[attribute.name.replace(/^data-/g, '').replace(/(\\w)-(\\w)/g, (g, m1, m2) => m1 + m2.toUpperCase())] = attrs[attribute.name];\n\t\t}\n\t});\n\n\tif (propsOnly) return props;\n\treturn attrs;\n}\n\nfunction setElementAttr(source, target = source) {\n\tlet baseAttrs = {};\n\t[].forEach.call(source.children, el => {\n\t\tif (el.text) return;\n\t\tlet name = el.tagName.toLowerCase();\n\t\tif (baseAttrs[name]) {\n\t\t\tif (!baseAttrs[name].isArray) {\n\t\t\t\tbaseAttrs[name] = [baseAttrs[name]];\n\t\t\t\tbaseAttrs[name].isArray = true;\n\t\t\t}\n\t\t\tbaseAttrs[name].push(el);\n\t\t} else {\n\t\t\tbaseAttrs[name] = el;\n\t\t}\n\t});\n\ttarget.element = baseAttrs;\n}\n\nfunction handleStyles(element) {\n\tlet tagName = element.tagName;\n\t$('link', element).forEach(link => {\n\t\tif (link.attributes.type === 'stylesheet') {\n\t\t\ttrigger('publish-style', link);\n\t\t}\n\t});\n\ttrigger('publish-style',\n\t\t$('style', element).map(style => {\n\t\t\tlet code = style.innerHTML.replace(/<br>/g, '');\n\t\t\treturn code.replace(/[\\r\\n]*([^@%\\{;\\}]+?)\\{/gm, (global, match) => {\n\t\t\t\tvar selectors = match.split(',').map(selector => {\n\t\t\t\t\tselector = selector.trim();\n\t\t\t\t\tif (selector.match(/:host\\b/) ||\n\t\t\t\t\t\tselector.match(new RegExp(`^\\\\s*${tagName}\\\\b`)) ||\n\t\t\t\t\t\tselector.match(/^\\s*(?:(?:\\d+%)|(?:from)|(?:to)|(?:@\\w+)|\\})\\s*$/)) {\n\t\t\t\t\t\treturn selector;\n\t\t\t\t\t}\n\t\t\t\t\treturn tagName + ' ' + selector;\n\t\t\t\t});\n\t\t\t\treturn global.replace(match, selectors.join(','));\n\t\t\t}).replace(/:host\\b/gm, tagName) + '\\n';\n\t\t}).join('\\n')\n\t);\n}\n\nfunction handleScripts(element, path) {\n\tlet functions = merge({}, defaultFunctions);\n\t$('script', element).forEach(script => {\n\t\tlet text = script.innerHTML.trim();\n\t\tif (script.attributes.src) {\n\t\t\treturn trigger('publish-script', script);\n\t\t}\n\t\ttry {\n\t\t\ttext = text.replace(/\\bZino\\.import\\s*\\(/g, 'Zino.import.call({path: \"' + path + '\"}, ');\n\t\t\tmerge(functions, new Function('return ' + text)());\n\t\t} catch (e) {\n\t\t\terror(`parse script ${text} in tag ${element.tagName}`, e);\n\t\t}\n\t});\n\treturn functions;\n}\n\non('--zino-unmount-tag', unmountTag);\non('--zino-mount-tag', mount);\n","import {merge, isFn, isObj} from './utils';\n\nconst\n\tsyntax = /\\{\\{\\s*([^\\}]+)\\s*\\}\\}\\}?/g,\n\n\tgetValue = (name, data, noRun) => {\n\t\tlet parts = ['.'],\n\t\t\tobj = data;\n\n\t\tif (obj[name]) {\n\t\t\tparts = [name];\n\t\t} else if (name.length > 1) {\n\t\t\tparts = name.split('.');\n\t\t}\n\n\t\twhile (obj && parts.length > 0) {\n\t\t\tobj = obj[parts.shift()];\n\t\t}\n\n\t\tif (!noRun && isFn(obj)) {\n\t\t\tobj = obj.apply(data);\n\t\t}\n\t\treturn obj !== undefined && obj !== null ? obj : '';\n\t},\n\n\thandleBlock = (match, data, code, options, depth, startIdx) => {\n\t\tlet ch = match[0],\n\t\t\tkey = match.substr(1).trim(),\n\t\t\tcondition = getValue(key, data, true),\n\t\t\tparsed = '',\n\t\t\tresult = '';\n\n\t\tif (ch === '^' && (!condition || condition && condition.length <= 0)) {\n\t\t\tcondition = true;\n\t\t} else if (ch === '^') {\n\t\t\tcondition = false;\n\t\t}\n\n\t\tif (condition) {\n\t\t\tif (!isObj(condition)) {\n\t\t\t\tcondition = [condition];\n\t\t\t}\n\t\t\tfor (let all in condition) {\n\t\t\t\tif (all === 'isArray') continue;\n\t\t\t\tlet el = condition[all];\n\t\t\t\tparsed = parse(\n\t\t\t\t\t\tcode,\n\t\t\t\t\t\tmerge({}, data, el, {\n\t\t\t\t\t\t\t'.index': all,\n\t\t\t\t\t\t\t'.length': condition.length,\n\t\t\t\t\t\t\t'.': el\n\t\t\t\t\t\t}),\n\t\t\t\t\t\toptions,\n\t\t\t\t\t\tdepth,\n\t\t\t\t\t\tstartIdx\n\t\t\t\t\t);\n\t\t\t\tif (isFn(el)) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tresult += el(parsed.content);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tthrow new Error('Unable to run condition function ' + parsed.content + ' while parsing template: ' + e.message);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresult += parsed.content;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!isObj(parsed)) {\n\t\t\tparsed = parse(code, data, options, depth, startIdx);\n\t\t}\n\n\t\treturn [parsed.lastIndex, result];\n\t},\n\n\tparse = function(code, data, options = {}, depth = 0, startIdx = 0) {\n\t\tlet result = '',\n\t\t\tlastPos = startIdx,\n\t\t\tmatch, key, len, ch,\n\n\t\t\ttransform = val => isFn(val) ? transform(val.apply(data)) : val + (typeof val === 'number' && val !== null ? (data.styles && data.styles.defaultUnit || 'px') : ''),\n\t\t\trenderStyle = name => {\n\t\t\t\tlet value = getValue(name, data),\n\t\t\t\t\tstyle = '';\n\n\t\t\t\tif (isObj(value)) {\n\t\t\t\t\tfor (var all in value) {\n\t\t\t\t\t\tstyle += all.replace(/[A-Z]/g, g => '-' + g.toLowerCase()) + ':' + transform(value[all]) + ';';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn style;\n\t\t\t};\n\n\t\t// reset regexp so that recursion works\n\t\tif (!code.match(syntax)) {\n\t\t\treturn {\n\t\t\t\tcontent: code,\n\t\t\t\tlastIndex: code.length - 1\n\t\t\t};\n\t\t}\n\n\t\twhile ((match = syntax.exec(code))) {\n\t\t\tif (match.index < lastPos) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tresult += code.substr(lastPos, match.index - lastPos);\n\t\t\tch = match[1][0];\n\t\t\tkey = match[1].substr(1).trim();\n\t\t\tlen = match[0].length;\n\t\t\tlastPos = match.index + len;\n\n\t\t\tif ('#^'.indexOf(ch) >= 0) {\n\t\t\t\t// begin of block\n\t\t\t\tlet cresult;\n\t\t\t\t[lastPos, cresult] = handleBlock(match[1], data, code, options, depth + 1, lastPos);\n\t\t\t\tresult += cresult;\n\t\t\t} else if (ch === '/') {\n\t\t\t\t// end of block\n\t\t\t\tif (depth <= 0) {\n\t\t\t\t\tthrow new Error('Unexpected end of block ' + key);\n\t\t\t\t}\n\t\t\t\treturn {lastIndex: lastPos, content: result};\n\t\t\t} else if (ch === '!') {\n\t\t\t\t// comment - don't do anything\n\t\t\t\tresult += '';\n\t\t\t} else if (ch === '%') {\n\t\t\t\t// interpret given values separated by comma as styling\n\t\t\t\tresult += key.split(/\\s*,\\s*/).map(renderStyle).join('');\n\t\t\t} else if (ch === '+') {\n\t\t\t\tvar value = getValue(key, data);\n\t\t\t\tlet id = options.resolveData(key, value);\n\t\t\t\tresult += '--' + id + '--';\n\t\t\t} else if (ch === '{') {\n\t\t\t\t// unescaped content\n\t\t\t\tresult += getValue(key, data);\n\t\t\t} else {\n\t\t\t\t// escaped content\n\t\t\t\tresult += ('' + getValue(match[1], data)).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/\"/g, '&quot;');\n\t\t\t}\n\t\t}\n\t\tresult += code.substr(lastPos);\n\t\tif (depth > 0) {\n\t\t\tthrow new Error('Unable to locate end of block for ' + code.substr(startIdx));\n\t\t}\n\n\t\treturn {\n\t\t\tcontent: result,\n\t\t\tlastIndex: code.length - 1\n\t\t}\n\t};\n\n// parses mustache-like template code\nexport default function(code, data, options = {resolveData: x=>x}) {\n\tvar result = parse(code, data, options);\n\treturn result && result.content || '';\n};\n","import {registerTag, render} from './core';\nimport {emptyFunc, isObj} from './utils';\nimport {find as $} from './htmlparser';\nimport {on, one, off, trigger} from './events';\n\nlet urlRegistry = window.zinoTagRegistry || {},\n\tZino,\n\tdirtyTags = [],\n\ttagObserver = new MutationObserver(records => {\n\t\trecords.forEach(record => {\n\t\t\tlet added = record.addedNodes,\n\t\t\t\tremoved = record.removedNodes;\n\n\t\t\tif (added.length > 0) {\n\t\t\t\t[].forEach.call(added, tag => {\n\t\t\t\t\t(tag.children && $('*', tag) || []).concat(tag).forEach(subTag => trigger('--zino-mount-tag', subTag));\n\t\t\t\t});\n\t\t\t} else if (removed.length > 0) {\n\t\t\t\t[].forEach.call(removed, tag => {\n\t\t\t\t\t(tag.children && $('[__ready]', tag) || []).concat(tag).forEach(subTag => trigger('--zino-unmount-tag', subTag));\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t});\n\nexport default Zino = {\n\ton, one, off, trigger,\n\n\tfetch(url, callback, cache, code) {\n\t\tif (cache && urlRegistry[url] && !urlRegistry[url].callback) {\n\t\t\treturn callback(urlRegistry[url], 200);\n\t\t} else if (isObj(urlRegistry[url])) {\n\t\t\treturn urlRegistry[url].callback.push(callback);\n\t\t}\n\t\turlRegistry[url] = code || {\n\t\t\tcallback: [callback]\n\t\t};\n\t\tif (code) return;\n\t\tlet req = new XMLHttpRequest();\n\t\treq.open('GET', url, true);\n\t\treq.onreadystatechange = () => {\n\t\t\tif (req.readyState === 4) {\n\t\t\t\tlet callbacks = urlRegistry[url].callback;\n\t\t\t\tif (req.status === 200) {\n\t\t\t\t\turlRegistry[url] = req.responseText;\n\t\t\t\t}\n\t\t\t\tif (!cache) delete urlRegistry[url];\n\t\t\t\tcallbacks.forEach(cb => cb(req.responseText, req.status));\n\t\t\t}\n\t\t};\n\t\treq.send();\n\t},\n\n\timport(path, callback = emptyFunc) {\n\t\tlet url = (this.path || '') + path;\n\t\tZino.fetch(url, (data, status) => {\n\t\t\tif (status === 200) {\n\t\t\t\tregisterTag(data, url, document.body);\n\t\t\t\tcallback();\n\t\t\t}\n\t\t}, true);\n\t}\n};\nwindow.Zino = Zino;\non('publish-style', data => {\n\tif (typeof data === 'string' && data.length > 0) {\n\t\tlet style = document.createElement('style');\n\t\tstyle.innerHTML = data;\n\t\tdata = style;\n\t}\n\tdata && document.head.appendChild(data);\n});\non('publish-script', document.head.appendChild);\non('--zino-rerender-tag', tag => dirtyTags.push(tag));\ntrigger('publish-style', '[__ready] { contain: content; }');\n$('[rel=\"zino-tag\"]', document).forEach(tag => Zino.import(tag.href));\ntagObserver.observe(document.body, {\n\tsubtree: true,\n\tchildList: true\n});\n\nrequestAnimationFrame(function reRender() {\n\tdirtyTags.forEach(render);\n\tdirtyTags = [];\n\trequestAnimationFrame(reRender);\n});\n"]}